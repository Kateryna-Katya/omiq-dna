{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n\n  // 1. Инициализация Lenis (Скролл)\n  //\n  const lenis = new Lenis({\n      duration: 1.2,\n      easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n      direction: 'vertical',\n      smooth: true,\n  });\n  function raf(time) {\n      lenis.raf(time);\n      requestAnimationFrame(raf);\n  }\n  requestAnimationFrame(raf);\n\n  // 2. Мобильное меню\n  const burger = document.querySelector('.header__burger');\n  const nav = document.querySelector('.header__nav');\n  const links = document.querySelectorAll('.header__link');\n\n  if (burger) {\n      burger.addEventListener('click', () => {\n          nav.classList.toggle('active');\n          burger.classList.toggle('active');\n      });\n      links.forEach(l => l.addEventListener('click', () => {\n          nav.classList.remove('active');\n          burger.classList.remove('active');\n      }));\n  }\n\n  // 3. Three.js Hero\n  const canvas = document.getElementById('hero-canvas');\n  if (canvas) {\n      const scene = new THREE.Scene();\n      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n      const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      canvas.appendChild(renderer.domElement);\n\n      const geometry = new THREE.BufferGeometry();\n      const count = 300;\n      const posArray = new Float32Array(count * 3);\n      for(let i=0; i<count*3; i++) posArray[i] = (Math.random()-0.5)*10;\n      geometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));\n      const material = new THREE.PointsMaterial({size: 0.04, color: 0x3B82F6});\n      const mesh = new THREE.Points(geometry, material);\n      scene.add(mesh);\n      camera.position.z = 5;\n\n      function animate() {\n          requestAnimationFrame(animate);\n          mesh.rotation.y += 0.002;\n          renderer.render(scene, camera);\n      }\n      animate();\n  }\n\n  // 4. Логика Формы\n  const form = document.getElementById('leadForm');\n  const successMsg = document.getElementById('formSuccess');\n\n  // Мат. капча\n  const n1 = Math.floor(Math.random() * 5) + 1;\n  const n2 = Math.floor(Math.random() * 5) + 1;\n  const captchaLabel = document.getElementById('captchaLabel');\n  const captchaInput = document.getElementById('captchaInput');\n  if(captchaLabel) captchaLabel.textContent = `Сколько будет ${n1} + ${n2}?`;\n\n  if (form) {\n      form.addEventListener('submit', (e) => {\n          e.preventDefault();\n          let isValid = true;\n\n          document.querySelectorAll('.form-group').forEach(g => g.classList.remove('error'));\n          document.querySelector('.form-checkbox').classList.remove('error');\n\n          const name = document.getElementById('name');\n          if (name.value.length < 2) {\n              name.parentElement.classList.add('error');\n              isValid = false;\n          }\n\n          const email = document.getElementById('email');\n          if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email.value)) {\n              email.parentElement.classList.add('error');\n              isValid = false;\n          }\n\n          const phone = document.getElementById('phone');\n          if (!/^[0-9+ ]{7,15}$/.test(phone.value)) {\n              phone.parentElement.classList.add('error');\n              isValid = false;\n          }\n\n          if (parseInt(captchaInput.value) !== (n1 + n2)) {\n              captchaInput.parentElement.classList.add('error');\n              isValid = false;\n          }\n\n          const policy = document.getElementById('policy');\n          if (!policy.checked) {\n              policy.parentElement.classList.add('error');\n              isValid = false;\n          }\n\n          if (isValid) {\n              const btn = form.querySelector('button[type=\"submit\"]');\n              btn.textContent = 'Отправка...';\n              btn.disabled = true;\n\n              setTimeout(() => {\n                  form.style.display = 'none';\n                  successMsg.style.display = 'block';\n                  console.log('Lead sent');\n              }, 1000);\n          }\n      });\n  }\n\n  // 5. Swiper (Блог)\n  new Swiper('.blog-slider', {\n      slidesPerView: 1,\n      spaceBetween: 20,\n      loop: true,\n      pagination: { el: '.swiper-pagination', clickable: true },\n      breakpoints: {\n          768: { slidesPerView: 2 },\n          1024: { slidesPerView: 3 }\n      }\n  });\n\n  // 6. Аккордеон FAQ\n  document.querySelectorAll('.faq__item').forEach(item => {\n      item.querySelector('.faq__question').addEventListener('click', () => {\n          item.classList.toggle('active');\n      });\n  });\n\n  // 7. Cookie\n  const cookiePopup = document.getElementById('cookiePopup');\n  if (cookiePopup && !localStorage.getItem('omiq_cookies')) {\n      setTimeout(() => cookiePopup.classList.add('show'), 2000);\n      document.getElementById('acceptCookie').addEventListener('click', () => {\n          localStorage.setItem('omiq_cookies', 'true');\n          cookiePopup.classList.remove('show');\n      });\n  }\n});\n\n// --- АНИМАЦИИ GSAP ---\nwindow.addEventListener('load', () => {\n\n  if (typeof gsap !== 'undefined' && typeof ScrollTrigger !== 'undefined') {\n      gsap.registerPlugin(ScrollTrigger);\n      ScrollTrigger.refresh();\n\n      // Анимация Hero\n      gsap.from('.hero__content', {\n          y: 30,\n          opacity: 0,\n          duration: 1,\n          delay: 0.2\n      });\n\n      // Заголовки секций\n      gsap.utils.toArray('.section-title').forEach(title => {\n          gsap.from(title, {\n              scrollTrigger: {\n                  trigger: title,\n                  start: 'top 90%',\n                  toggleActions: 'play none none reverse'\n              },\n              y: 30,\n              opacity: 0,\n              duration: 0.8\n          });\n      });\n\n      // --- ИСПРАВЛЕННЫЙ БЛОК ДЛЯ СЕТОК (BENEFITS, INNOVATIONS, PRACTICES) ---\n      // Мы явно выбираем контейнеры\n      const containers = document.querySelectorAll('.benefits__grid, .innovations__scroller, .practices__wrapper');\n\n      containers.forEach(container => {\n          // Проверяем, есть ли дети внутри контейнера\n          if (container.children.length > 0) {\n\n              // 1. Превращаем \"детей\" в настоящий массив (важно для корректной работы stagger)\n              const items = Array.from(container.children);\n\n              // 2. Запускаем анимацию\n              gsap.from(items, {\n                  scrollTrigger: {\n                      trigger: container, // Триггер - сам контейнер\n                      start: 'top 85%',   // Запуск, когда верх блока появится внизу экрана\n                      // markers: true,   // Раскомментируй для отладки, если не сработает\n                  },\n                  y: 50,          // Элементы выезжают снизу\n                  opacity: 0,     // Из прозрачности\n                  duration: 0.8,\n                  stagger: 0.2,   // Задержка 0.2 сек между каждым элементом списка\n                  clearProps: \"all\" // ОЧЕНЬ ВАЖНО: Удаляет инлайн-стили после анимации, чтобы не ломать верстку\n              });\n          }\n      });\n  }\n});"],"names":["lenis","t","raf","time","burger","nav","links","l","canvas","animate","mesh","renderer","scene","camera","geometry","count","posArray","i","material","form","successMsg","n1","n2","captchaLabel","captchaInput","e","isValid","g","name","email","phone","policy","btn","item","cookiePopup","title","container","items"],"mappings":"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"}